from pathlib import Path

# Contenu HTML complet avec Clara en 3D via ReadyPlayerMe (GLB), chat vocal + interface minimale
html_code = """
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>RecovAI - Clara 3D</title>
  <style>
    html, body { margin: 0; height: 100%; background: #0f172a; overflow: hidden; }
    #chatbox {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: #111;
      padding: 10px;
      border-radius: 8px;
      display: flex;
      gap: 5px;
    }
    #chatbox input {
      padding: 8px;
      border: none;
      border-radius: 4px;
    }
    #chatbox button {
      background: #2563eb;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <div id="chatbox">
    <input id="userText" type="text" placeholder="Parlez Ã  Clara..." />
    <button onclick="speak()">Parler</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.157.0/examples/js/loaders/GLTFLoader.js"></script>

  <script>
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 100);
    camera.position.set(0, 1.6, 2.5);

    const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('canvas'), antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    const light = new THREE.HemisphereLight(0xffffff, 0x444444);
    scene.add(light);

    const loader = new THREE.GLTFLoader();
    loader.load('https://models.readyplayer.me/68438ba4aae00c0ddd72cb9c.glb', function (gltf) {
      const model = gltf.scene;
      model.position.set(0, 0, 0);
      scene.add(model);
    }, undefined, function (error) {
      console.error('Erreur lors du chargement de Clara :', error);
    });

    function animate() {
      requestAnimationFrame(animate);
      renderer.render(scene, camera);
    }
    animate();

    function speak() {
      const msg = document.getElementById('userText').value;
      if (!msg.trim()) return;
      const utterance = new SpeechSynthesisUtterance(msg);
      utterance.lang = 'fr-FR';
      utterance.pitch = 1;
      utterance.rate = 1;
      speechSynthesis.speak(utterance);
    }
  </script>
</body>
</html>
"""

# Sauvegarde dans un fichier HTML
file_path = Path("/mnt/data/RecovAI_Clara3D_complet.html")
file_path.write_text(html_code, encoding="utf-8")

file_path.name
